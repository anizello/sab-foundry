<div class="gold-container">
    <div class="character-encumbrance {{#if (eq (calculateTotalWeight gear) system.attributes.invSlots.value)}}danger-active{{/if}}">
        <label for="system.attributes.gold.value" class="resource-label">
            <span>
                {{#if (lt (calculateTotalWeight gear) system.attributes.invSlots.value)}}
                    <a title="{{localize 'SAB.encumbrance.remove'}}">
                        <i class="fas fa-minus item-control" id="remove-slot"></i>
                    </a>
                {{/if}}
            </span>
            {{localize "SAB.encumbrance.name"}}
            <span>
                <a title="{{localize 'SAB.encumbrance.add'}}">
                    <i class="fas fa-plus item-control" id="add-slot"></i>
                </a>
            </span>
        </label>

        <span>
            <input class="section-input " type="text" value="{{calculateTotalWeight gear}} / {{system.attributes.invSlots.value}}" data-dtype="Number" readonly />
        </span>
    </div>

    <!--Gold -->
    <div class="character-gold">
        <label for="system.attributes.gold.value" class="resource-label">{{localize "SAB.character.gold.long"}}</label>
        <span>
            <input class="section-input " type="text" name="system.attributes.gold.value" value="{{system.attributes.gold.value}}" data-dtype="Number"/>
        </span>
    </div>
</div>

<!-- Inventory -->
<div class="inventory-container">
    <ol class="items-list">
          {{#each gear as |item id|}}
            <li class="item" data-item-id="{{item._id}}">
                <div class="item-name">
                    <div class="item-info">
                        {{#if (ne item.system.itemType "fatigue")}}
                            <a class="rollable" data-roll-type="item">
                                {{#if item.system.roll.diceSize}}
                                    <i
                                        class="fa-solid fa-sword"
                                        title="{{item.name}}{{#if item.system.description}}: {{stripTags item.system.description}}{{/if}}"
                                    ></i>
                                {{else}}
                                    <i
                                        class="fa-solid fa-comments"
                                        title="{{item.name}}{{#if item.system.description}}: {{stripTags item.system.description}}{{/if}}"
                                    ></i>
                                {{/if}}
                            </a>
                        {{/if}}
                    </div>
                    <h4>
                        {{#if (gt item.system.quantity 1)}}<span>{{item.system.quantity}}x</span>{{/if}} {{handleItemWeight item}}
                    </h4>
                </div>

                <div class="item-description">
                    {{#if (or item.system.roll.diceSize (gt item.system.armorValue 0))}}
                        <div class="item-armor-damage">
                            {{#if item.system.roll.diceSize}}
                                <span class="item-formula item-prop">{{item.system.formula}}</span>
                            {{/if}}
                            {{#if (gt item.system.armorValue 0)}}
                                <span class="item-prop">{{item.system.armorValue}} {{localize "SAB.character.armor.short"}}</span>
                            {{/if}}
                        </div>

                        {{#if item.system.description}}
                            <span class="description-divider"></span>
                        {{/if}}
                    {{/if}}

                    {{#if item.system.description}}
                        <p>{{handleLineBreaks item.system.description}}</p>
                    {{/if}}
                </div>

                <div class="item-controls">
                    {{#if (ne item.system.itemType "fatigue")}}
                        {{#if (gt item.system.quantity 1)}}
                            <a
                                class="item-control item-quantity-remove"
                                title="{{localize "DOCUMENT.remove" }}"
                            >
                                <i class="fas fa-minus"></i>
                            </a>
                        {{/if}}

                        <a
                            class="item-control item-quantity-add"
                            title="{{localize "DOCUMENT.add" }}"
                            >
                            <i class="fas fa-plus"></i>
                        </a>

                        <a
                            class="item-control item-edit"
                            title="{{localize "DOCUMENT.edit" }}"
                            >
                            <i class="fas fa-edit"></i>
                        </a>
                    {{/if}}

                    <a
                        class="item-control item-delete"
                        title="{{localize "DOCUMENT.delete" }}"
                    >
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
            </li>
        {{/each}}
    </ol>
</div>

<!-- New Item -->
<div class="new-item-container item-controls">
    {{#if (lt (calculateTotalWeight gear) system.attributes.invSlots.value)}}
        <button type="button" class="item-create" data-type="item">
            <i class="fa-regular fa-plus"></i>
            {{localize "SAB.actions.new-item"}}
        </button>

        <button type="button" class="item-create" data-type="item" data-item-type="fatigue">
            <i class="fa-regular fa-plus"></i>
            {{localize "SAB.actions.new-fatigue"}}
        </button>
    {{else}}
        <button type="button" disabled>
            <i class="fa-regular fa-plus"></i>
            {{localize "SAB.actions.new-item"}}
        </button>

        <button type="button" disabled>
            <i class="fa-regular fa-plus"></i>
            {{localize "SAB.actions.new-fatigue"}}
        </button>
    {{/if}}
</div>
